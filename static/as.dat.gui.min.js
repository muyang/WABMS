(function(){ABM.DatGUI=function(){function i(i,t){var e=this;this.gui=new dat.GUI,this.datGuiModel={};var a,n,s;2==arguments.length?(a=this.model=i,n=this.ui=t):(s=this.fbui=i,n=this.ui=s.ui);for(var u in n)if(n.hasOwnProperty(u)){var o=n[u];"button"!=o.type&&(this.datGuiModel[u]=o.val,s&&s.refs[u].child("val").on("value",function(i){e.datGuiModel[this.name]=i.val(),e.updateGui()}.bind({name:u})));var d=null;switch(o.type){case"button":this.datGuiModel[u]=e.fbui?function(){e.fbui.setUIValue(this.name,!0)}.bind({name:u}):function(){e.setModelValue(this.name)}.bind({name:u}),this.gui.add(this.datGuiModel,u);break;case"choice":d=this.gui.add(this.datGuiModel,u,o.vals);break;case"switch":d=this.gui.add(this.datGuiModel,u);break;case"slider":d=this.gui.add(this.datGuiModel,u,o.min,o.max).step(o.step)}if(d){var h;h=e.fbui?function(i){e.fbui.setUIValue(this.name,i)}.bind({name:u}):function(i){e.setModelValue(this.name,i)}.bind({name:u}),o.smooth?d.onChange(h):d.onFinishChange(h)}}}return i.prototype.setModelValue=function(i,t){var e=this.ui[i].setter;e?this.model[e](t):this.model[i]=t},i.prototype.updateGui=function(){for(var i in this.gui.__controllers)this.gui.__controllers[i].updateDisplay()},i}()}).call(this);