(function(){var t=function(t,s){return function(){return t.apply(s,arguments)}};ABM.Mouse=function(){function s(s,e){this.model=s,this.callback=e,this.handleMouseMove=t(this.handleMouseMove,this),this.handleMouseUp=t(this.handleMouseUp,this),this.handleMouseDown=t(this.handleMouseDown,this),this.lastX=1/0,this.lastY=1/0,this.div=this.model.div,this.start()}return s.prototype.start=function(){return this.div.addEventListener("mousedown",this.handleMouseDown,!1),document.body.addEventListener("mouseup",this.handleMouseUp,!1),this.div.addEventListener("mousemove",this.handleMouseMove,!1),this.lastX=this.lastY=this.x=this.y=this.pixX=this.pixY=0/0,this.moved=this.down=!1},s.prototype.stop=function(){return this.div.removeEventListener("mousedown",this.handleMouseDown,!1),document.body.removeEventListener("mouseup",this.handleMouseUp,!1),this.div.removeEventListener("mousemove",this.handleMouseMove,!1),this.lastX=this.lastY=this.x=this.y=this.pixX=this.pixY=0/0,this.moved=this.down=!1},s.prototype.handleMouseDown=function(t){return this.down=!0,this.setXY(t)},s.prototype.handleMouseUp=function(){return this.down=!1},s.prototype.handleMouseMove=function(t){return this.setXY(t)},s.prototype.setXY=function(t){var s;return this.lastX=this.x,this.lastY=this.y,this.pixX=t.offsetX,this.pixY=t.offsetY,s=this.model.patches.pixelXYtoPatchXY(this.pixX,this.pixY),this.x=s[0],this.y=s[1],this.moved=this.x!==this.lastX||this.y!==this.lastY,null!=this.callback?this.callback(t):void 0},s}()}).call(this);