(function(){ABM.FirebaseUI=function(){function t(t,e,s){var i,n,o,l;this.fbname=t,this.model=e,this.ui=s,this.fb=new Firebase(t),this.refs={},o=this.ui;for(i in o)n=o[i],this.refs[i]=this.fb.child(i);this.vals={},l=this.ui;for(i in l)n=l[i],this.vals[i]=n.val;this.resetModel(),this.fb.set(s,function(t){return console.log(null!=t?"FB error: "+t:"FB ready")}),this.fb.on("child_changed",function(t){return function(e){return console.log("childChange",e.name(),e.val().val),t.setModelValue(e.name(),e.val().val)}}(this)),console.log("--- Firebase setup")}return t.prototype.setModelValue=function(t,e){var s;if(console.log("setModelValue: "+t+", "+e),this.vals[t]=e,"button"===this.ui[t].type){if(!e)return;this.setUIValue(t,!1)}return null!=(s=this.ui[t].setter)?this.model[s](e):this.model[t]=e},t.prototype.setUIValue=function(t,e,s){return null==s&&(s=!1),console.log("setUIValue: "+t+", "+e+", "+s),this.refs[t].child("val")[s?"push":"set"](e)},t.prototype.getUIValue=function(t){return this.vals[t]},t.prototype.resetModel=function(){var t,e,s,i;s=this.ui,i=[];for(t in s)e=s[t],"button"!==e.type&&i.push(this.setModelValue(t,e.val));return i},t.prototype.resetUI=function(){var t,e,s,i;s=this.ui,i=[];for(t in s)e=s[t],"button"!==e.type&&i.push(this.setUIValue(t,e.val));return i},t}()}).call(this);